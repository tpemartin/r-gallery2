import{j as e,S as j,T as m,B as h,r as l,c as R,R as B}from"./Stack-4ed42e28.js";import{D,a as T,b as L,c as I,B as u,T as g,d as $,e as P,u as N,C as V,f as M,g as H,P as v,h as J,A as U,i as y,j as q,F as K,k as z,l as Q,G as Z}from"./Backup-ba981994.js";import{L as X,a as b}from"./axios-0b1e88b9.js";import{A as F,d as W,a as _,b as Y,P as ee}from"./GitHub-ffaa5c81.js";import{F as te,a as ne,R as se,b as re,c as oe}from"./RadioGroup-343ef73f.js";import{F as C,R as ae,d as ie,a as le}from"./Close-977f47cc.js";import{G as S}from"./Grid2-f33ded95.js";function ce({number:t,title:n,subtitle:s}){return e.jsx(e.Fragment,{children:e.jsxs(j,{direction:"row",spacing:2,sx:{justifyContent:"space-between",alignItems:"center"},children:[e.jsx(de,{groupNumber:t}),e.jsx(ue,{title:n,subtitle:s}),e.jsx(me,{})]})})}function de({groupNumber:t=1}){return e.jsx(e.Fragment,{children:e.jsx(F,{sx:{bgcolor:W[500]},children:t})})}function ue({title:t="Title",subtitle:n="Subtitle"}){return e.jsx(e.Fragment,{children:e.jsxs(j,{direction:"column",spacing:2,className:"card-title",children:[e.jsx(m,{variant:"h6",children:t}),e.jsx(m,{variant:"subtitle1",children:n})]})})}function me(){return e.jsx(e.Fragment,{children:e.jsx(_,{})})}function je({link:t}){return e.jsx(e.Fragment,{children:e.jsx(j,{direction:"column",spacing:2,sx:{alignItems:"center"},children:e.jsx(xe,{link:t})})})}function xe({link:t}){let n;return t.includes("you")?n=`https://www.youtube.com/embed/${he(t)}`:t.includes("vimeo")&&(n=`https://player.vimeo.com/video/${ge(t)}?h=7c051b9510`),e.jsx(e.Fragment,{children:e.jsx("iframe",{src:n,width:"100%",height:200,frameBorder:0,allow:"autoplay; fullscreen",allowFullScreen:!0})})}function he(t){return t.match(new RegExp("(?<=https:\\/\\/youtu\\.be\\/)[^/]+"))[0]}function ge(t){return t.match(new RegExp("(?<=https:\\/\\/vimeo\\.com\\/)[^/]+"))[0]}function fe({description:t}){return e.jsx(e.Fragment,{children:e.jsx(h,{sx:{overflow:"hidden",height:"300px",overflowY:"scroll"},children:e.jsx(m,{variant:"body1",children:t})})})}function pe({github_link:t,group:n,init_rate:s=null}){const[r,i]=l.useState(!1),a=()=>{i(o=>!o)};return e.jsx(e.Fragment,{children:e.jsxs(j,{direction:"row",spacing:2,sx:{justifyContent:"space-between"},children:[e.jsx(X,{href:t,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Y,{})}),e.jsx(be,{ratingOpen:r,group:n,init_rate:s}),e.jsx(we,{ratingOpen:r,onClick:a})]})})}function be({ratingOpen:t=!1,group:n,init_rate:s=null}){const[r,i]=l.useState(s);return window.ratings[n]=r,e.jsx(e.Fragment,{children:e.jsx(h,{children:e.jsx(C,{in:t,timeout:300,children:e.jsx(ae,{name:"project-rating",value:r,max:5,onChange:(a,o)=>{i(o)}})})})})}function we({ratingOpen:t=!1,onClick:n}){const s=t?e.jsx(ie,{onClick:n}):e.jsx(le,{onClick:n});return e.jsx(e.Fragment,{children:s})}function ve({project:t,number:n,group:s,init_rate:r=null}){return e.jsx(e.Fragment,{children:e.jsx(ee,{elevation:3,sx:{p:3},children:e.jsxs(j,{direction:"column",spacing:2,children:[e.jsx(ce,{number:n,title:t.Title,subtitle:t.Subtitle}),e.jsx(je,{link:t["Video link"]}),e.jsx(fe,{description:t.Description}),e.jsx(pe,{github_link:t["Github link"],group:s,init_rate:r})]})})})}function ye({project:t,number:n,group:s,init_rate:r=null}){return e.jsx(e.Fragment,{children:e.jsx(S,{xs:12,sm:6,md:4,xl:3,children:e.jsx(ve,{project:t,number:n,group:s,init_rate:r})})})}const Fe="https://script.google.com/macros/s/AKfycbyIZNwTCjqHQr5oOjlOrBWIpfZJ1suttwiSa3Z7_DyEq_unO3X-3KhhVItf3z-ruEVDKw/exec";function _e(t){const n=t.shift();function s(i){const a=Object();return i.forEach((o,c)=>{a[n[c]]=o}),a}return t.map(i=>s(i))}async function Ce(){try{const t=await b.get(Fe);return _e(t.data)}catch(t){console.log(t)}}function Se({ratingData:t=null}){window.ratings=t;const n=localStorage.getItem("dataObjects"),[s,r]=l.useState(n&&n!=="undefined"?JSON.parse(n):null),i=s?e.jsx(S,{container:!0,spacing:2,children:s.map((a,o)=>e.jsx(ye,{project:a,number:o+1,group:o+1,init_rate:t[o+1]},o))}):e.jsx("div",{children:" loading...."});return l.useEffect(()=>{Ce().then(a=>{r(a),console.log(a),localStorage.setItem("dataObjects",JSON.stringify(a))})},[]),e.jsx(e.Fragment,{children:i})}window.axios=b;async function Oe(t){const n="https://script.google.com/macros/s/AKfycbw2EVs98nX2H2zuJ1vagPKwB4Qd4H0fA7qcwtE5DtIU57Qi_8GHdAec2v4PwBhO9agM_A/exec";return await b.post(n,t)}function Ge({children:t,disabled:n=!1}){const[s,r]=l.useState(!1),i=()=>{r(!0)},a=()=>{r(!1)},o=e.jsx(ke,{onClick:i,open:s,disabled:n}),c=l.useRef(null);return l.useEffect(()=>{if(s){const{current:x}=c;x!==null&&x.focus()}},[s]),e.jsxs(l.Fragment,{children:[o,e.jsxs(D,{open:s,onClose:a,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[e.jsx(T,{id:"scroll-dialog-title",children:"組員互評"}),e.jsx(L,{dividers:!0,children:t}),e.jsxs(I,{children:[e.jsx(u,{onClick:a,children:"Cancel"}),e.jsx(u,{onClick:a,children:"Subscribe"})]})]})]})}function ke({onClick:t,open:n,disabled:s=!1}){return e.jsx(e.Fragment,{children:e.jsx(g,{title:"組員互評",children:e.jsx(u,{color:"inherit",onClick:t,open:n,disabled:s,children:e.jsx(_,{})})})})}window.eval_members=Object();const O=["(127)曾浚曜","(030)楊詠翔","(046)蔡昱丞","(097)邵緒倫"];O.forEach(t=>{window.eval_members[t]=null});function Ae({disabled:t=!1}){const n=O.map((s,r)=>e.jsx(Re,{member:s},r));return e.jsx(Ge,{children:e.jsx(te,{disabled:t,children:n})})}function Ee(){const[t,n]=l.useState(!1),s=()=>{window.assessment.submit=!0,n(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(Le,{onClick:s}),e.jsx(Te,{}),e.jsx(Ae,{disabled:t})]})}function Re({member:t}){const n=e.jsx(Be,{member:t});return e.jsxs(e.Fragment,{children:[e.jsx(ne,{id:t,children:t}),n]})}function Be({member:t}){const[n,s]=l.useState(window.eval_members[t]),r=(o,c)=>{window.eval_members[t]=c,s(c)},a=Array.from({length:6},(o,c)=>c).map((o,c)=>e.jsx(De,{value:o},c));return e.jsx(e.Fragment,{children:e.jsx(se,{row:!0,"aria-labelledby":t,name:"position",defaultValue:"top",value:n,onChange:r,children:a})})}function De({value:t}){return e.jsx(e.Fragment,{children:e.jsx(re,{value:""+t,control:e.jsx(oe,{}),label:""+t,labelPlacement:"top"})})}function Te(){return e.jsx(e.Fragment,{children:e.jsx(g,{title:"儲存",children:e.jsx(u,{color:"inherit",onClick:()=>{update_record_assessment()},children:e.jsx($,{})})})})}function Le({onClick:t}){return e.jsx(e.Fragment,{children:e.jsx(g,{title:"送出成績",children:e.jsx(u,{color:"inherit",onClick:t,children:e.jsx(P,{})})})})}window.assessment=Object();window.assessment.user=null;window.assessment.group=null;window.assessment.members=null;window.assessment.project=null;window.assessment.submit=!1;function Ie({setRatingData:t=null}){const[n,s]=l.useState(!1),[r,i]=l.useState(null),[a,o]=l.useState(null),[c,x]=l.useState(!1),k=N({onSuccess:w=>{console.log(w),Oe(w.access_token).then(d=>{if(console.log(d),d.status===200)if(s(!0),d.data){if(window.assessment.user=d.data.user,window.assessment.group=d.data.group,i(d.data),o(!0),d.data.assessment){window.tt=d.data.assessment.project;const p=JSON.parse(d.data.assessment.project);console.log("projectAssessment",p),window.assessment.project=JSON.parse(d.data.assessment.project),window.assessment.members=d.data.assessment.members,console.log(window.assessment),window.eval_members=window.assessment.members,window.ratings=p,t(p)}}else o(!1)})}}),A=()=>{x(!0),k()},E=c?e.jsx(V,{color:"inherit"}):e.jsx($e,{onClick:A});let f;return n?f=e.jsx(Pe,{userData:r,isClassStudent:a}):f=E,e.jsx(e.Fragment,{children:f})}function $e({onClick:t}){return e.jsx(e.Fragment,{children:e.jsx(g,{title:"登入",children:e.jsx(u,{color:"inherit",onClick:t,children:e.jsx(M,{})})})})}function Pe({userData:t,isClassStudent:n}){console.log(n);const s=n?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{}),e.jsx(Ne,{userData:t})]}):e.jsx(Ve,{});return e.jsx(e.Fragment,{children:s})}function Ne({userData:t}){return e.jsx(e.Fragment,{children:e.jsx(F,{alt:t.user,src:t.photo})})}function Ve(){return e.jsx(e.Fragment,{children:e.jsxs(m,{variant:"h6",component:"div",sx:{flexGrow:1},className:"visitor",children:[e.jsx(H,{}),"訪客"]})})}function Me(){const[t,n]=l.useState(Object());return e.jsxs(l.Fragment,{children:[e.jsx(J,{}),e.jsx(U,{children:e.jsxs(y,{children:[e.jsx(m,{variant:"h6",component:"div",children:"Scroll to see button"}),e.jsx(Ie,{setRatingData:n})]})}),e.jsx(y,{id:"back-to-top-anchor"}),e.jsx(q,{children:e.jsx(h,{sx:{my:2},children:e.jsx(Se,{ratingData:t})})}),e.jsx(G,{children:e.jsx(K,{size:"small","aria-label":"scroll back to top",children:e.jsx(z,{})})})]})}function G(t){const{children:n,window:s}=t,r=Q({target:s?s():void 0,disableHysteresis:!0,threshold:100}),i=a=>{const o=(a.target.ownerDocument||document).querySelector("#back-to-top-anchor");o&&o.scrollIntoView({block:"center"})};return e.jsx(C,{in:r,children:e.jsx(h,{onClick:i,role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:n})})}G.propTypes={children:v.element.isRequired,window:v.func};function He(){return e.jsxs(e.Fragment,{children:[e.jsx(Z,{clientId:"235254569809-suckfgfkjcf9p4c04oofodo6ropcj6nf.apps.googleusercontent.com",children:e.jsx(Me,{})}),";"]})}R.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(He,{})}));
